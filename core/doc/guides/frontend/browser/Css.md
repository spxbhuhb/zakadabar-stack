# CSS and Theming

Check the demo example: [Themes](../../../../../demo/demo-lib/src/jsMain/kotlin/zakadabar/demo/lib/frontend/themes)

| class | use |
| ----- | --- |
| [ZkApplication](/src/jsMain/kotlin/zakadabar/stack/frontend/application/ZkApplication.kt) | `theme` property  stores the active theme |
| [ZkTheme](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/ZkTheme.kt) | interface for themes |
| [ZkCssStyleSheet](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/css/ZkCssStyleSheet.kt) | CSS style sheet builder / manager |
| [ZkColors](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/ZkColors.kt) | Color constants (Material) |
| [ZkIcons](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/ZkIcons.kt) | Icons (Material) |
| [ZkFormatters](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/ZkFormatters.kt) | Formatters (data to string) |

## Theme

* Themes define values used by style sheets.
* Each style sheet can access the current theme in the `theme` property
  of [ZkApplication](/src/jsMain/kotlin/zakadabar/stack/frontend/application/ZkApplication.kt)
* Changing the theme:
    * rebuilds all attached style sheets.
    * **does not** re-render the page.
* Built-in themes:
    * [ZkBuiltinLightTheme](/src/jsMain/kotlin/zakadabar/stack/frontend/builtin/theme/ZkBuiltinLightTheme.kt)
        - light theme
    * [ZkBuiltinDarkTheme](/src/jsMain/kotlin/zakadabar/stack/frontend/builtin/theme/ZkBuiltinDarkTheme.kt)
        - dark theme
    * [ZkBuiltinContrastTheme](/src/jsMain/kotlin/zakadabar/stack/frontend/builtin/theme/ZkBuiltinContrastTheme.kt)
        - high contrast theme

### Initial Theme Selection

`ZkApplication.initTheme`, called from `jsMain/main.kt`, selects the theme to use during application startup.

Algorithm:

1. check account theme, if present, find the theme with the given name in `ZkApplication.themes`
2. check local storage for `zk-theme-name`, if present, find the theme with the given name in `ZkApplication.themes`
3. first theme in `ZkApplication.themes`, if not empty
4. ZkBuiltinLightTheme

### Change the Theme

```kotlin
ZkApplication.theme = ZkBuildinLightTheme()
```

## Write a CSS Style Sheet

CSS style sheets are typically objects
extending [ZkCssStyleSheet](/src/jsMain/kotlin/zakadabar/stack/frontend/resources/css/ZkCssStyleSheet.kt):

```kotlin
/**
 * CSS styles are usually defined in objects.
 */
object DemoStyles : ZkCssStyleSheet<ZkTheme>() {

    // Define a style. The actual name of the CSS class is generated by
    // the stack and is stored in this variable.

    val exampleStyle by cssClass {

        // You can use pre-defined helpers to access most properties

        color = ZkColors.Red.c600
        backgroundColor = ZkColors.Gray.c300

        // If there is no helper, just add directly to [styles]

        styles["font-family"] = "monospace"

        // Some pseudo classes have helpers

        hover {
            color = ZkColors.white
        }

        // For the ones without helper use [on]

        on(":disabled") {
            color = ZkColors.white
        }

        // You can use media queries with [media]

        media("(min-width: 800px)") {
            width = 300
        }

        // You can use [on] directly for media queries

        on(media = "(min-width: 1200px)") {
            width = 600
        }

        // Convenience for media queries

        // small = (max-width: 600px)
        // medium = (min-width: 800px)
        // large = (min-width: 1200px)

        small {
            fontSize = 12
        }

        medium {
            fontSize = 14
        }

        large {
            fontSize = 16
        }

    }

    // Call [attach] to add the style sheet to the document. Without this the
    // style sheet is not known by the browser. For commonly used style sheets
    // [init] is fine, but you can dynamically attach / detach styles sheets
    // with the appropriate method call.

    init {
        attach()
    }

}
```

## Fix CSS Class Name

CSS classes defined with `cssClass` have automatically generated names to avoid collisions.

To use a fix name pass it as parameter to `cssClass`

```kotlin
val myClass by cssClass("fix-class-name") { }
```

## Use CSS Selectors

The function `cssRule` let you specify whatever selector you would like instead of a class name.

At the moment functions `on`, `media`, `hover` etc **do not work** inside `cssRule`.

In this case the property name ("link" in this case) is mostly useless.

```kotlin
val link by cssRule("a") {
    color = theme.color.info
    textDecoration = "none"
}
```

You can combine your classes with selectors. The example below will set the styles for
`<a>` tags under the element that has the `content` css class. Note that the actual CSS class name of `content` is
automatically generated.

```kotlin
val content by cssClass {
    
}

val link by cssRule(".$content a") {
    color = theme.color.info
    textDecoration = "none"
}
```

## Use a CSS Class

```kotlin
// You can pass the CSS class to most builder methods

+ div(DemoStyles.exampleStyle) {
    + "Styled content"
} marginBottom 20

// For ZkElements you can use the [css] inline function

+ ZkButton("button 1") css DemoStyles.exampleButtonStyle marginBottom 20

// Use [className] to replace ALL classes

+ ZkButton("button 2") build {
    className = DemoStyles.exampleButtonStyle
} marginBottom 20

// Use [classList] to manipulate the class list

+ ZkButton("button 3") build {
    classList += DemoStyles.exampleButtonStyle
    classList -= DemoStyles.exampleButtonStyle
    classList += DemoStyles.exampleButtonStyle
} marginBottom 20
```

## Replace CSS Style Sheets

Use the `merge` method to update a CSS style sheet.

```kotlin
DemoStyles.merge(DemoRedStyles())
```

## Scroll Bar Styles

Scroll bars are styled
by [ZkScrollBarStyles](/src/jsMain/kotlin/zakadabar/stack/frontend/builtin/layout/ZkScrollBarStyles.kt)
.

The default is to use scroll bar colors aligned with the theme.

To switch off scroll bar styling use `detach`:

```kotlin
scrollBarStyles.detach()
```